---
# == CLUSTER NODES DEFINITION ==
# master nodes (define 1 or 3 with ip-address in ansible_host)
master:
  hosts:
# if you use more than 3 machines, define the rest as workers
worker:
  hosts:
# there are use cases for dedicated loadbalancers.
# if you don't use dedicated loadbalancers, all machines will act as loadbalancers
loadbalancer:
  hosts:

# == GLOBAL VARIABLES ==
all:
  vars:
    # give your cluster a name
    clustername: g8s-m-cluster

    # which components do we roll out.
    # you can find the available components in the ./components directory
    # in the gubernat repo
    components:
      - cert-manager
      - contour
      # - httpbin    # (test app)
      - kubernetes-dashboard
      - local-storage
      - metrics-server
      # - multus    # (only for multiple network stacks)
      - opentelemetry
      - prometheus
      - trust-manager

    # (optional) to enable disconnected installation, define a registry mirror
    # all images have to be in this mirror
    # registry_mirror: registry.pflaeging.net/gubernat_mirror

    # (optional) The api_loadbalancer_port is optional if you want to use an api-loadbalancer 
    #   and if you're not using the loadbalancer host defined here!
    # api_loadbalancer: "agw-loadbalancer.internal.myorg.at" 
    # api_loadbalancer_port: 5443

    # the internal ip address range for pods
    k8s_cidr: 10.85.0.0/16
    # the internal ip address range for services
    k8s_svc_cidr: 10.86.0.0/16

    # which kubernetes and cri-o version do we roll out?
    k8s_version: 1.33.1
    crio_version: 1.32.1

    # specify your DNS servers here. They will act as forwarders
    dns_forwarders:
    - 8.8.8.8
    - 8.8.4.4

    # specify at least two ntp servers
    ntp_servers:
    - ts1.aco.net
    - europe.pool.ntp.org

    # Upgrade the OS version when Upgrading K8s
    upgrade_os: false

    # Variables so ansible knows which user and ssh key to use
    # Don't change unless you know what you're doing
    ansible_user: root
    ansible_ssh_private_key_file: "./config:{{ clustername }}/root-ssh-key"
